load("@rules_cc//cc:defs.bzl", "cc_library")

cc_library(
	name = "sdl2",
	hdrs = glob(["include/*.h"]),
	includes = ["include", "src"],
    copts = [
        #"-pthread"
    ],
    linkopts = [
        #"-pthread",
    ],
	defines = [
        "HAVE_SDL_MISC",
        "HAVE_SDL_AUDIO",
        "HAVE_SDL_FILESYSTEM",
        "HAVE_SDL_JOYSTICK",
        "HAVE_SDL_POWER",
        "HAVE_SDL_LOCALE",
        "HAVE_SDL_TIMERS",
        "HAVE_CLOCK_GETTIME",
        "HAVE_SDL_VIDEO",
        "HAVE_OPENGLES",
        "SDL_AUDIO_DRIVER_EMSCRIPTEN",
        "SDL_FILESYSTEM_EMSCRIPTEN",
        "SDL_JOYSTICK_EMSCRIPTEN",
        "SDL_POWER_EMSCRIPTEN",
        "SDL_THREADS_DISABLED",
        "SDL_TIMER_UNIX",
        "SDL_LOADSO_DLOPEN",
        "SDL_VIDEO_DRIVER_EMSCRIPTEN",
        "SDL_VIDEO_OPENGL_EGL",
        "SDL_VIDEO_OPENGL_ES2",
        "SDL_VIDEO_RENDER_OGL_ES2",
    ],
	srcs = glob([
		"include/*.h",
		"src/*.c",
		"src/*.h",
		"src/atomic/*.c",
		"src/atomic/*.h",
		"src/audio/*.c",
		"src/audio/*.h",
		"src/audio/disk/*.c",
		"src/audio/disk/*.h",
		"src/audio/dummy/*.c",
		"src/audio/dummy/*.h",
		"src/audio/emscripten/*.c",
		"src/audio/emscripten/*.h",
		# "src/core/linux/*.c",
		"src/core/linux/*.h",
		"src/cpuinfo/*.c",
		"src/cpuinfo/*.h",
		"src/dynapi/*.c",
		"src/dynapi/*.h",
		"src/events/*.c",
		"src/events/*.h",
		"src/file/*.c",
		"src/file/*.h",
		"src/filesystem/emscripten/*.c",
		"src/filesystem/emscripten/*.h",
		"src/haptic/*.c",
		"src/haptic/*.h",
		"src/hidapi/*.c",
		"src/hidapi/*.h",
		"src/joystick/*.c",
		"src/joystick/*.h",
		"src/joystick/emscripten/*.c",
		"src/joystick/emscripten/*.h",
		"src/joystick/hidapi/*.c",
		"src/joystick/hidapi/*.h",
		"src/libm/*.c",
		"src/libm/*.h",
		"src/loadso/dlopen/*.c",
		"src/loadso/dlopen/*.h",
		"src/locale/*.c",
		"src/locale/*.h",
		"src/locale/emscripten/*.c",
		"src/locale/emscripten/*.h",
		# "src/main/dummy/*.c",
		# "src/main/dummy/*.h",
		"src/misc/*.c",
		"src/misc/*.h",
		"src/misc/emscripten/*.c",
		"src/misc/emscripten/*.h",
		"src/power/*.c",
		"src/power/*.h",
		"src/power/emscripten/*.c",
		"src/power/emscripten/*.h",
		"src/render/*.c",
		"src/render/*.h",
		"src/render/opengl/*.c",
		"src/render/opengl/*.h",
		"src/render/software/*.c",
		"src/render/software/*.h",
		"src/sensor/*.c",
		"src/sensor/*.h",
		"src/sensor/dummy/*.c",
		"src/sensor/dummy/*.h",
		"src/stdlib/*.c",
		"src/stdlib/*.h",
		"src/thread/*.c",
		"src/thread/*.h",
		"src/thread/generic/*.c",
		"src/thread/generic/*.h",
		# "src/thread/pthread/*.c",
		# "src/thread/pthread/*.h",
		"src/timer/*.c",
		"src/timer/*.h",
		"src/timer/unix/*.c",
		"src/timer/unix/*.h",
		"src/video/*.c",
		"src/video/*.h",
		"src/video/emscripten/*.c",
		"src/video/emscripten/*.h",
		"src/video/yuv2rgb/*.c",
		"src/video/yuv2rgb/*.h",
	]),
	alwayslink = True,
	visibility = ["//front_end/sdl2:__subpackages__"],
)